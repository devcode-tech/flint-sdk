<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Flint SDK Demo</title>
	</head>
	<body>
		<div class="container mx-auto p-4">
			<h1 class="text-2xl font-bold mb-4">Flint SDK Demo</h1>

			<!-- Flint Form -->
			<div class="p-6 rounded-lg shadow-md mb-8 bg-red-50">
				<flint-form
					id="my-form"
					formId="fc3b8b79-61c0-4aa4-861a-7573e02da67d"
				></flint-form>
			</div>

			<!-- Existing test components -->
			<div class="mt-8">
				<h2 class="text-xl font-semibold mb-4">Test Components</h2>
				<test-component name="Pippo"></test-component>
				<test2-component name="Pluto"></test2-component>
				<p class="mt-2 text-gray-600">
					This section is not affected by the component styles
				</p>
			</div>
		</div>

		<!-- Import the Flint SDK and initialize the form -->
		<script type="module" crossorigin>
			import '/dist/flint-sdk.iife.js';

			// import { FlintSDK } from '/dist/flint-sdk.iife.js';
			// import { FlintSDK } from 'https://flint-sdk-3g3mu.ondigitalocean.app/flint-sdk.js';
			// import { FlintSDK } from 'https://flint-sdk-3g3mu.ondigitalocean.app/flint-sdk.iife.js';

			// Initialize the SDK with configuration
			// const flint = new FlintSDK({
			// 	supabaseUrl: import.meta.env.VITE_SUPABASE_URL || '',
			// 	supabaseKey: import.meta.env.VITE_SUPABASE_ANON_KEY || '',
			// });

			// Wait for the DOM to be fully loaded and custom elements to be defined
			// 	customElements.whenDefined('flint-form').then(() => {
			// 		document.addEventListener('DOMContentLoaded', async () => {
			// 			const form = document.getElementById('my-form');
			// 			const loadingEl = document.getElementById('loading');
			// 			const errorEl = document.getElementById('error');
			// 			const errorDetails = document.getElementById('error-details');

			// 			try {
			// 				const formId = 'fc3b8b79-61c0-4aa4-861a-7573e02da67d'; // Your default form ID

			// 				// Optional: Add custom form submission handler if needed
			// 				const handleFormSubmit = async e => {
			// 					// This is now optional - form will work even without this handler
			// 					console.log('Custom form submission handler:', e.detail);
			// 					// If you want to prevent the default submission, call:
			// 					// e.preventDefault();
			// 					// Then handle the submission yourself
			// 				};

			// 				// Listen for form submission events (optional)
			// 				form.addEventListener('form-submit', handleFormSubmit);

			// 				// Listen for successful submissions (optional)
			// 				form.addEventListener('submit-success', e => {
			// 					console.log('Form submitted successfully:', e.detail);
			// 					// Show success message
			// 					alert('Form submitted successfully!');
			// 				});

			// 				// Listen for submission errors (optional)
			// 				form.addEventListener('submit-error', e => {
			// 					console.error('Form submission failed:', e.detail.error);
			// 					// Show error message
			// 					if (errorEl) {
			// 						errorEl.classList.remove('hidden');
			// 						if (errorDetails) {
			// 							errorDetails.textContent =
			// 								e.detail.error.message || 'Failed to submit form';
			// 						}
			// 					}
			// 				});

			// 				// Hide loading state
			// 				if (loadingEl) loadingEl.style.display = 'none';
			// 			} catch (error) {
			// 				console.error('Failed to initialize form:', error);
			// 				if (loadingEl) loadingEl.style.display = 'none';
			// 				if (errorEl) {
			// 					errorEl.classList.remove('hidden');
			// 					if (errorDetails) {
			// 						errorDetails.textContent =
			// 							error.message || 'Unknown error occurred';
			// 					}
			// 				}
			// 			}
			// 		});
			// 	});
			//
		</script>

		<!-- Existing component scripts -->
		<script type="module" src="/src/test/test.component.ts"></script>
		<script type="module" src="/src/test2/test2.component.ts"></script>
	</body>
</html>
